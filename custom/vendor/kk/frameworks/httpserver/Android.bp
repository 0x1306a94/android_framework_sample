
aidl_interface {
    name: "kkhttpserver-aidl-interfaces",
    local_include_dir: "aidl",
    backend: {
        cpp: {
            enabled: true,
        },
        java: {
            enabled: true,
        },
    },
    srcs: [
        "aidl/com/kk/http/IHTTPServerService.aidl",
    ],
    api_dir: "aidl/api",
    versions: ["1"],
}

cc_library_shared {
    name: "libkk_http_server_service",
    vendor_available: true,
    cflags: [
        "-std=c++11",
        "-fexceptions",
        "-Wno-unused-parameter",
        "-Wno-unused-function",
        "-Wno-unused-label",
    ],
    srcs: [
        "cpp_libs/src/**/*.cpp",
    ],
    local_include_dirs: [
        "cpp_libs/src"
    ],
    export_shared_lib_headers: [
        "libbinder",
    ],
    export_include_dirs: [
        "."
    ],
    shared_libs: [
        "kkhttpserver-aidl-interfaces-cpp",
        "libhv",
        "libbase",
        "liblog",
        "libcutils",
        "libutils",
        "libbinder",
    ],
}

cc_binary {
    name: "kk_http_server",
    vendor_available: true,
    cflags: [
        "-std=c++11",
        "-fexceptions",
        "-Wno-unused-parameter",
        "-Wno-unused-function",
        "-Wno-unused-label",
    ],
    srcs: [
        "cmd/main.cpp",
    ],
    local_include_dirs: [
    
    ],
    shared_libs: [
        "libkk_http_server_service",
        "kkhttpserver-aidl-interfaces-cpp",
        "libhv",
        "libbase",
        "liblog",
        "libcutils",
        "libutils",
        "libbinder",
    ],
    init_rc: [
        "init.kk_http_server.rc",
    ]
}


java_library_static {
    name: "com.kk.httpserver.api",
    installable: true,
    srcs: [
        "java/**/*.java",
    ],
    static_libs:[
        "kkhttpserver-aidl-interfaces-java",
    ]
}


